(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{11:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return b}));var r=n(16),a=n.n(r),o=n(29),c=n(31),i=n(10),s=Object(c.a)({reducerPath:"users",baseQuery:Object(i.d)({baseUrl:"https://connections-api.herokuapp.com/users",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["user"],endpoints:function(e){return{registerUser:e.mutation({queryFn:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({url:"/signup",method:"POST",body:t}).then((function(e){if(e.error)switch(e.error.status){case 400:return{error:{status:400,data:"Wrong email or passwird"}};case 404:return{error:{status:404,data:"Not found"}};case 500:return{error:{status:500,data:"Servers error"}};default:return e.error}return e})).catch((function(e){return e}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),invalidatesTags:["user"]}),loginUser:e.mutation({queryFn:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({url:"/login",method:"POST",body:t}).then((function(e){if(e.error)switch(e.error.status){case 400:return{error:{status:400,data:"Wrong email or passwird"}};case 404:return{error:{status:404,data:"Not found"}};default:return e.error}return e})).catch((function(e){return e}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),invalidatesTags:["user"]}),logoutUser:e.mutation({queryFn:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({url:"/logout",method:"POST"}).then((function(e){if(e.error)switch(e.error.status){case 401:return{error:{status:401,data:"No authorization"}};case 404:return{error:{status:404,data:"Not found"}};case 500:return{error:{status:500,data:"Servers error"}};default:return e.error}return e})).catch((function(e){return e}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}),getUser:e.query({queryFn:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.getState().auth.token){e.next=2;break}return e.abrupt("return",{data:{name:null,email:null}});case 2:return e.next=4,o({url:"/current"}).then((function(e){if(e.error)switch(e.error.status){case 401:return{error:{status:401,data:"No authorization"}};case 404:return{error:{status:404,data:"Not found"}};default:return e.error}return e})).catch((function(e){return e}));case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()})}}}),u=s.useRegisterUserMutation,d=s.useLoginUserMutation,l=s.useLogoutUserMutation,b=s.useGetUserQuery},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var r=n(31),a=n(10),o=Object(r.a)({reducerPath:"contactApi",baseQuery:Object(a.d)({baseUrl:"https://61fb809f87801d0017a2c527.mockapi.io"}),tagTypes:["Contact"],endpoints:function(e){return{fetchContacts:e.query({query:function(){return"/contacts"},providesTags:["Contact"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contact"]}),createContact:e.mutation({query:function(e,t){return{url:"/contacts",method:"POST",body:{name:e,phone:t}}},invalidatesTags:["Contact"]})}}}),c=o.useFetchContactsQuery,i=o.useDeleteContactMutation,s=o.useCreateContactMutation},33:function(e,t,n){"use strict";var r,a=n(40),o=n(6),c=n(7).a.div(r||(r=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n\n  /* display: grid;\n  place-content: center; */\n"]))),i=n(1);t.a=function(e){var t=e.height,n=void 0===t?100:t,r=e.width,o=void 0===r?100:r;return Object(i.jsx)(c,{children:Object(i.jsx)(a.a,{color:"#02be6e",height:n,width:o})})}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),a=Object(r.b)("contacts/change-filter")},53:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(21),i=n.n(c),s=n(5),u=n(15),d=n(38),l=n(61),b=Object.freeze({breakpoints:{mobile:"480px",totablet:"767px",tablet:"768px",todesktop:"1199px",desktop:"1200px"},colors:{mainColor:"#2196f3",secondaryColor:"#333232",accentColor:"#F7CC07",clearColor:"#fff",smallColor:"#4c527d",inactiveColor:"#808080",borderColor:"#d4d4d4",backgroundColor:"#f0f1f3",backgroundColorForm:"#E3DEE9",borderDisabledColor:"#999999",backgroundDisabledColor:"#cccccc",boxShadow:"0px 4px 4px rgb(0 0 0 / 15%)"},transition:{timing:"250ms",timingFunction:"cubic-bezier(0.4, 0, 0.2, 1)"}}),j=(n(52),n(53),n(18)),p=n(41),h=n(2),f=n(10),x=n(17),O=n(39),g=n.n(O),m=n(35),v=Object(h.d)("",Object(j.a)({},m.a,(function(e,t){return t.payload}))),y=n(30),w=n(11),k=Object(h.e)({name:"auth",initialState:{token:null,user:null},extraReducers:function(e){e.addMatcher(w.e.endpoints.registerUser.matchFulfilled,(function(e,t){var n=t.payload;e.token=n.token,e.user=n.user,e.isLogged=!0})),e.addMatcher(w.e.endpoints.loginUser.matchFulfilled,(function(e,t){var n=t.payload;e.token=n.token,e.user=n.user,e.isLogged=!0})),e.addMatcher(w.e.endpoints.logoutUser.matchFulfilled,(function(e){e.token=null,e.user=null,e.isLogged=!1})),e.addMatcher(w.e.endpoints.getUser.matchFulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLogged=!0}))}}),C=[].concat(Object(p.a)(Object(h.f)({serializableCheck:{ignoredActions:[x.a,x.f,x.b,x.c,x.d,x.e]}})),[y.a.middleware,w.e.middleware]),z={key:"auth",storage:g.a,whitelist:["token"]},T=Object(x.g)(z,k.reducer),F=Object(h.a)({reducer:(r={},Object(j.a)(r,w.e.reducerPath,w.e.reducer),Object(j.a)(r,y.a.reducerPath,y.a.reducer),Object(j.a)(r,k.name,T),Object(j.a)(r,"filter",v),r),middleware:C,devTools:!1});Object(f.e)(F.dispatch);var U,S,L,P,M,q,E,N,D=Object(x.h)(F),Q=n(3),A=n(6),B=n(7),H=B.a.div(U||(U=Object(A.a)(["\nmax-width: 1440px;\nmargin-left: auto;\nmargin-right: auto;\npadding-left: 15px;\npadding-right: 15px;\n"]))),W=n(1),J=function(e){var t=e.children;return Object(W.jsx)(H,{children:t})},R=function(e){var t,n,r;return null!==(t=null===e||void 0===e||null===(n=e.auth)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.name)&&void 0!==t?t:null},G=function(e){var t;return!!(null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.token)},I=B.a.header(S||(S=Object(A.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n\n  padding: 20px;\n  border-bottom: 1px solid #d4d4d4;\n\n  @media screen and (min-width: 767px) {\n    flex-direction: row;\n\n    padding: 0;\n  }\n"]))),Y=B.a.ul(L||(L=Object(A.a)(["\n  display: flex;\n\n  margin-bottom: 15px;\n\n  @media screen and (min-width: 767px) {\n    margin-bottom: 0;\n  }\n"]))),K=B.a.li(P||(P=Object(A.a)(["\n  &:not(:last-child) {\n    margin-right: 20px;\n  }\n"]))),V=Object(B.a)(u.b)(M||(M=Object(A.a)(["\n  display: inline-block;\n  text-decoration: none;\n  padding: 12px;\n  font-weight: 500;\n  color: #6d7e83;\n  font-size: 30px;\n  transition: color 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  &:hover,\n  &:focus {\n    color: #2196f3;\n    transition: color 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  &.active {\n    color: #2196f3;\n  }\n\n  @media screen and (min-width: 767px) {\n    padding: 20px 0;\n  }\n"])));function X(){var e=Object(s.e)(G);return Object(W.jsx)("nav",{children:Object(W.jsxs)(Y,{children:[Object(W.jsx)(K,{children:Object(W.jsx)(V,{to:"/",children:"Home"})}),e&&Object(W.jsx)(K,{children:Object(W.jsx)(V,{to:"/contacts",children:"Contacts"})})]})})}var Z=B.a.ul(q||(q=Object(A.a)(["\n  display: flex;\n"]))),$=B.a.li(E||(E=Object(A.a)(["\n  &:not(:last-child) {\n    margin-right: 20px;\n  }\n"]))),_=Object(B.a)(u.b)(N||(N=Object(A.a)(["\n  display: inline-block;\n  text-decoration: none;\n  padding: 12px;\n  font-weight: 500;\n  color: #6d7e83;\n  font-size: 30px;\n  transition: color 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  &:hover,\n  &:focus {\n    color: #2196f3;\n    transition: color 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  &.active {\n    color: #2196f3;\n  }\n\n  @media screen and (min-width: 767px) {\n    padding: 20px 0;\n  }\n"])));function ee(){return Object(W.jsxs)(Z,{children:[Object(W.jsx)($,{children:Object(W.jsx)(_,{to:"/register",children:"Sign up"})}),Object(W.jsx)($,{children:Object(W.jsx)(_,{to:"/login",children:"Log in"})})]})}var te,ne,re,ae,oe,ce,ie=n(14),se=B.a.div(te||(te=Object(A.a)(["\n  display: flex;\n  align-items: center;\n\n  margin-bottom: 10px;\n\n  @media screen and (min-width: 767px) {\n    margin-bottom: 0;\n  }\n"]))),ue=B.a.div(ne||(ne=Object(A.a)(["\n  width: 32px;\n  margin-right: 10px;\n"]))),de=B.a.img(re||(re=Object(A.a)(["\n  width: 100%;\n\n  border-radius: 50%;\n\n  opacity: 1;\n\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n\n  cursor: pointer;\n\n  &:hover,\n  &:focus {\n    opacity: 0.8;\n\n    transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  }\n"]))),le=B.a.span(ae||(ae=Object(A.a)(["\n  margin-right: 10px;\n"]))),be=B.a.span(oe||(oe=Object(A.a)(["\n  font-weight: 500;\n"]))),je=B.a.button(ce||(ce=Object(A.a)(["\n  padding: 5px;\n  border: 0px solid transparent;\n  border-radius: 4px;\n\n  color: #fff;\n  background-color: #808080;\n\n  box-shadow: 0px 4px 4px rgb(0 0 0 / 15%);\n\n  opacity: 0.8;\n\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n\n  cursor: pointer;\n\n  &:hover,\n  &:focus {\n    opacity: 1;\n\n    transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  }\n"])));function pe(){var e=Object(s.e)(R),t=Object(w.c)(),n=Object(ie.a)(t,1)[0];return Object(W.jsxs)(se,{children:[Object(W.jsx)(ue,{children:Object(W.jsx)(de,{src:"https://eu.ui-avatars.com/api/?background=2196f3&color=fff&&length=1&name=".concat(e),alt:"avatar",title:"Your avatar"})}),Object(W.jsxs)(le,{children:["Welcome, ",Object(W.jsx)(be,{children:e})]}),Object(W.jsx)(je,{type:"button",title:"Log out","aria-label":"Log out",onClick:function(){n()},children:"Logout"})]})}function he(){var e=Object(s.e)(G);return console.log("isAuthenticated-AppBar",e),Object(W.jsxs)(I,{children:[Object(W.jsx)(X,{}),e?Object(W.jsx)(pe,{}):Object(W.jsx)(ee,{})]})}var fe=n(33),xe=n(22);function Oe(e){var t=e.element,n=e.redirectTo,r=Object(s.e)(G);return console.log("auth ",r),n?Object(W.jsx)(W.Fragment,{children:r?t:Object(W.jsx)(Q.a,{to:n})}):(xe.b.error("No path for redirect"),Object(W.jsx)(Q.a,{to:"/"}))}function ge(e){var t=e.redirectTo,n=e.restricted,r=void 0!==n&&n,a=e.element,o=Object(s.e)(G);return!t&&r?(xe.b.error("No path for redirect"),Object(W.jsx)(Q.a,{to:"/"})):Object(W.jsx)(W.Fragment,{children:o&&r?Object(W.jsx)(Q.a,{to:t}):a})}n(59);var me=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,70))})),ve=Object(a.lazy)((function(){return n.e(1).then(n.bind(null,66))})),ye=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,68))})),we=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,69))})),ke=function(){var e=w.e.endpoints.getUser.useQuery().data,t=Object(w.a)().isError;return console.log(e),console.log("errrrr",t),Object(W.jsxs)(J,{children:[Object(W.jsx)(he,{}),Object(W.jsx)(a.Suspense,{fallback:Object(W.jsx)(fe.a,{}),children:Object(W.jsxs)(Q.d,{children:[Object(W.jsx)(Q.b,{path:"/",element:Object(W.jsx)(me,{})}),Object(W.jsx)(Q.b,{path:"register",element:Object(W.jsx)(ge,{element:Object(W.jsx)(we,{}),redirectTo:"/contacts",restricted:!0})}),Object(W.jsx)(Q.b,{path:"login",element:Object(W.jsx)(ge,{element:Object(W.jsx)(ye,{}),redirectTo:"/contacts",restricted:!0})}),Object(W.jsx)(Q.b,{path:"contacts/*",element:Object(W.jsx)(Oe,{element:Object(W.jsx)(ve,{}),redirectTo:"/login"})})]})}),Object(W.jsx)(xe.a,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})};i.a.render(Object(W.jsx)(o.a.StrictMode,{children:Object(W.jsx)(l.b,{theme:b,children:Object(W.jsx)(s.a,{store:F,children:Object(W.jsx)(d.a,{loader:null,persistor:D,children:Object(W.jsx)(u.a,{children:Object(W.jsx)(ke,{})})})})})}),document.getElementById("root"))}},[[60,6,7]]]);
//# sourceMappingURL=main.30f800f9.chunk.js.map